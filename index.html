<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <script type="module" src="map.js"></script>
</head>
<body>
    <div class="header">
        <a href=index.html id="logo">
            easy go 
        </a>
        <div class="header_items">
            <div>
                <a href="member.html" class="hrefitem">關於我們</a>
                <a href="member.html" class="hrefitem">會員專區</a>
                <a href="signin.html" class="hrefitem">會員登入</a>
            </div>
            
        </div>
    </div>
    <div class="picdiv">
        <div class="slideshow">
            <div class="slide__item fades">
                <div class="slide__pagenumber">1 / 4</div>
                <img src="https://images.unsplash.com/photo-1619771914272-e3c1ba17ba4d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" />
            </div>
            <div class="slide__item fades">
                <div class="slide__pagenumber">2 / 4</div>
                <img src="https://images.unsplash.com/photo-1558981806-ec527fa84c39?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" />
            </div>
            <div class="slide__item fades">
                <div class="slide__pagenumber">3 / 4</div>
                <img src="https://images.unsplash.com/photo-1466196390423-fe0b175e30fa?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1039&q=80" />            
            </div>
            <div class="slide__item fades">
                <div class="slide__pagenumber">4 / 4</div>
                <img src="https://plus.unsplash.com/premium_photo-1661963005592-182d602c6a3f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1471&q=80" />
            </div>
            <a id="prev" class="slide__arraw slide__arraw--prev"> ❮ </a>
            <a id="next" class="slide__arraw slide__arraw--next"> ❯ </a>
            <div class="slide__dot">
                <div class="dot" data-value="1"></div>
                <div class="dot" data-value="2"></div>
                <div class="dot" data-value="3"></div>
                <div class="dot" data-value="4"></div>
            </div>
        </div>
    </div>
    <div id="menu">
        <button class="menubutton" onclick="getDataWithInput('charging_point')">電動機車充電站</button>
        <button class="menubutton" onclick="getDataWithInput('maintainance_station')">維修站</button>
        <button class="menubutton" onclick="getDataWithInput('gas_station')">台南市加油站</button>
        <button class="menubutton" >Gogoro電池站</button>
        <button class="menubutton" onclick="getDataWithInput('speed_limit')">測速照相點</button>
    </div>
    <script>
        var markers = [];
        function getDataWithInput(table) {
            var input1 = document.getElementById('County').value;
            var input2 = document.getElementById('district').value;
            getData(table, input1, input2);
        }
        function getData(table, input1, input2) {
            // 使用AJAX或其他方式向後端發送請求並傳遞table值
            // 在這裡可以使用AJAX函式庫（例如jQuery的$.ajax()函式）或原生的fetch API等方法
            // 下面是一個使用fetch API的示例：
            fetch("/get_data/" + table  + "/" + input1 + " " + input2, {
            method: "GET",
            // 可以根據需要設定其他請求選項，例如標頭或內容類型
            })
            .then(response => response.json())
            .then(data => {
            // 在这里处理后端返回的数据
            // 假设数据是一个数组，每个元素都是包含需要显示的字段的对象
            // 在这里，我们假设有一个id为 "result-container" 的 HTML 元素作为显示结果的容器
            const positions = data.positions;
            const resultContainer = document.getElementById("result-container");
            resultContainer.innerHTML = ""; // 清空容器内容

            // 遍历数据并将其显示在网页上
            data.informations.forEach(item => {
                const listItem = document.createElement("li");
                const value = Object.values(item).join(', '); // 将对象的值组合成字符串
                listItem.textContent = value;
                resultContainer.appendChild(listItem);
            });

            markers.forEach(marker => marker.setMap(null));
            markers.length = 0;

            data.positions.forEach(position => {
            const marker = new google.maps.Marker({
                position: { lat: position.latitude, lng: position.longitude },
                map: map
            });
            markers.push(marker); // 将标记加入数组
            });
            })
            .catch(error => {
            console.error("Error:", error);
            });
        }
    </script>
    <div id="maincontent">
            <div id="map"></div>
            <div id="undermap">
                <input type="text" id="County" placeholder="縣市">
                <input type="text" id="district" placeholder="區域">
                <input type="text" id="latitude" placeholder="請輸入緯度">
                <input type="text" id="longitude" placeholder="請輸入經度">
                <button id="search-btn">搜尋</button>
                <button id="locate-btn">定位</button>
                <div id="information-list"></div>
                <button id="show-info-btn">顯示資訊</button>
                <div id = "result"></div>
                <div id="result-container"></div>
            </div>
    </div>
    <div style="height: 2000px;"></div>
    <script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC_lQPUQDubZ06Q29mgzvPQLxMB5zP6cxs&callback=initMap&v=weekly&libraries=places"
    defer
    ></script>
    <script src="index.js"></script>
</body>
</html>